<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Nike LeBron 20</title>
  <style>
    * { box-sizing: border-box; }
    body { margin: 0; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: #fff; color: #111; }
    .breadcrumb {
      width: 100%;
      background-color: #f1f1f1;
      padding: 10px 20px;
      font-size: 0.9em;
      color: #555;
      margin-bottom: 20px;
    }
    .breadcrumb a {
      text-decoration: none;
      color: #007BFF;
      margin-right: 5px;
    }
    .breadcrumb a:hover {
      text-decoration: underline;
    }
    .breadcrumb span {
      margin-right: 5px;
      color: #555;
    }
    .container { display: flex; flex-wrap: wrap; min-height: 100vh; }
    .image-section { flex: 1; background-color: #f6f6f6; padding: 40px; display: flex; align-items: center; justify-content: center; }
    .image-section img { width: 100%; max-width: 600px; border-radius: 20px; }
    .details-section { flex: 1; padding: 50px 40px; display: flex; flex-direction: column; justify-content: center; }
    .details-section h1 { font-size: 2.7em; margin-bottom: 10px; }
    .details-section p { font-size: 1.2em; color: #555; margin-bottom: 20px; }
    .price { font-size: 1.5em; font-weight: bold; margin-bottom: 30px; }
    .tallas { display: flex; flex-wrap: wrap; gap: 15px; margin-bottom: 30px; }
    .talla-btn { font-size: 1em; padding: 15px 25px; border: 1px solid #ccc; border-radius: 10px; background-color: white; cursor: pointer; transition: 0.3s; }
    .talla-btn:hover { border-color: #111; }
    .talla-btn.selected { border: 2px solid #111; background-color: #eee; }
    .button { font-size: 1.2em; padding: 15px 30px; background-color: #111; color: white; border: none; border-radius: 10px; cursor: pointer; transition: background-color 0.3s; text-decoration: none; text-align: center; width: fit-content; }
    .button:disabled { background-color: #ccc; cursor: not-allowed; }
    @media (max-width: 768px) { .container { flex-direction: column; } .details-section { padding: 30px 20px; } }

    /* Estilos del carrito */
    .cart-icon {
      position: fixed;
      top: 10px;
      right: 10px;
      background-color: #007BFF;
      color: white;
      padding: 10px 15px;
      border-radius: 50px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 1em;
      z-index: 1000;
    }

    .cart-icon span {
      background-color: white;
      color: #007BFF;
      font-weight: bold;
      border-radius: 50%;
      padding: 5px 10px;
      font-size: 0.9em;
    }

    .cart-container {
      position: fixed;
      top: 60px;
      right: 10px;
      width: 300px;
      max-height: 400px;
      background-color: white;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      overflow-y: auto;
      display: none;
      z-index: 1000;
    }

    .cart-header {
      background-color: #007BFF;
      color: white;
      padding: 10px;
      text-align: center;
      font-size: 1.2em;
      border-top-left-radius: 10px;
      border-top-right-radius: 10px;
    }

    .cart-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px;
      border-bottom: 1px solid #ddd;
    }

    .cart-item:last-child {
      border-bottom: none;
    }

    .cart-item p {
      margin: 0;
      font-size: 0.9em;
    }

    .cart-item .remove-btn {
      background-color: #ff4d4d;
      color: white;
      border: none;
      border-radius: 5px;
      padding: 5px 10px;
      cursor: pointer;
      font-size: 0.8em;
    }

    .cart-item .remove-btn:hover {
      background-color: #cc0000;
    }

    .cart-footer {
      padding: 10px;
      text-align: center;
      font-size: 1em;
    }

    .cart-footer .checkout-btn {
      background-color: #28a745;
      color: white;
      border: none;
      border-radius: 5px;
      padding: 10px 20px;
      cursor: pointer;
      font-size: 1em;
    }

    .cart-footer .checkout-btn:hover {
      background-color: #218838;
    }

    #modalFormulario input,
    #modalFormulario select {
      width: 90%;
      padding: 8px 10px;
      margin: 7px 0;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 1em;
      box-sizing: border-box;
      outline: none;
      transition: border-color 0.2s;
    }
    #modalFormulario input:focus,
    #modalFormulario select:focus {
      border-color: #28a745;
    }
    #modalFormulario button[type="submit"] {
      background: #28a745;
      color: #fff;
      border: none;
      border-radius: 6px;
      padding: 10px 25px;
      margin-top: 10px;
      font-size: 1em;
      cursor: pointer;
      transition: background 0.2s;
    }
    #modalFormulario button[type="submit"]:hover {
      background: #218838;
    }
    #modalFormulario button[type="button"] {
      background: #ccc;
      color: #333;
      border: none;
      border-radius: 6px;
      padding: 10px 25px;
      margin-top: 10px;
      font-size: 1em;
      cursor: pointer;
      margin-left: 10px;
      transition: background 0.2s;
    }
    #modalFormulario button[type="button"]:hover {
      background: #999;
    }
    #modalFormulario form {
      display: flex;
      flex-direction: column;
      align-items: center;
    }
  </style>
</head>
<body>

<!-- Breadcrumb -->
<div class="breadcrumb">
  <a href="index.html">Inicio</a> >
  <a href="baloncesto.html">Baloncesto</a> >
  <a href="zapatillasnbasket.html">Zapatillas de Baloncesto</a> >
  <span>Nike LeBron 20</span>
</div>

<!-- Icono del carrito -->
<div class="cart-icon" id="cartIcon">
  üõí <span id="cartCount">0</span>
</div>

<!-- Contenedor del carrito -->
<div class="cart-container" id="cartContainer">
  <div class="cart-header">Tu Carrito</div>
  <div id="cartItems"></div>
  <div class="cart-footer">
    <div id="cartTotal" style="font-weight:bold; margin-top:10px;">Total: $0.00</div>
    <button class="checkout-btn" id="checkoutBtn">Finalizar Compra</button>
  </div>
</div>

<div class="container">
  <div class="image-section">
    <img src="zapatillaslebron.jpg" alt="Nike LeBron 20" />
  </div>

  <div class="details-section">
    <h1>Nike LeBron 20</h1>
    <p>Comodidad superior y amortiguaci√≥n explosiva para la cancha.</p>
    <div class="price">$179.99</div>

    <div><strong>Selecciona tu talla:</strong></div>
    <div class="tallas">
      <button class="talla-btn" data-talla="38">38</button>
      <button class="talla-btn" data-talla="39">39</button>
      <button class="talla-btn" data-talla="40">40</button>
      <button class="talla-btn" data-talla="41">41</button>
      <button class="talla-btn" data-talla="42">42</button>
    </div>

    <a id="comprarBtn" href="#" class="button" disabled>Confirmar compra</a>
  </div>
</div>

<!-- Modal formulario de compra -->
<div id="modalFormulario" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.4); z-index:3000; align-items:center; justify-content:center;">
  <div class="modal-content" style="background:white; padding:30px 40px; border-radius:12px; box-shadow:0 4px 16px rgba(0,0,0,0.2); text-align:center; min-width:320px; max-width:95vw;">
    <h2 style="color:#28a745; margin-bottom:10px;">Datos para tu compra</h2>
    <form id="formCompra">
      <input type="text" name="nombre" placeholder="Nombre" required>
      <input type="text" name="apellido" placeholder="Apellido" required>
      <input type="email" name="correo" placeholder="Correo electr√≥nico" required>
      <select name="ciudad" required>
        <option value="">Selecciona tu ciudad</option>
        <option value="Bogot√°">Bogot√°</option>
        <option value="Medell√≠n">Medell√≠n</option>
        <option value="Cali">Cali</option>
        <option value="Barranquilla">Barranquilla</option>
        <option value="Cartagena">Cartagena</option>
        <option value="C√∫cuta">C√∫cuta</option>
        <option value="Bucaramanga">Bucaramanga</option>
        <option value="Pereira">Pereira</option>
        <option value="Santa Marta">Santa Marta</option>
        <option value="Ibagu√©">Ibagu√©</option>
        <option value="Villavicencio">Villavicencio</option>
        <option value="Manizales">Manizales</option>
        <option value="Neiva">Neiva</option>
        <option value="Pasto">Pasto</option>
        <option value="Monter√≠a">Monter√≠a</option>
        <option value="Armenia">Armenia</option>
        <option value="Popay√°n">Popay√°n</option>
        <option value="Sincelejo">Sincelejo</option>
        <option value="Valledupar">Valledupar</option>
        <option value="Tunja">Tunja</option>
        <option value="Riohacha">Riohacha</option>
        <option value="Quibd√≥">Quibd√≥</option>
        <option value="Florencia">Florencia</option>
        <option value="Yopal">Yopal</option>
        <option value="Mocoa">Mocoa</option>
        <option value="San Andr√©s">San Andr√©s</option>
        <option value="Leticia">Leticia</option>
        <option value="Mit√∫">Mit√∫</option>
        <option value="Puerto Carre√±o">Puerto Carre√±o</option>
      </select>
      <input type="text" name="direccion" placeholder="Direcci√≥n" required>
      <input type="tel" name="telefono" placeholder="Tel√©fono" required pattern="[0-9]{7,15}" title="Solo n√∫meros, m√≠nimo 7 d√≠gitos">
      <select name="tipoDocumento" required>
        <option value="">Tipo de documento</option>
        <option value="CC">C√©dula de ciudadan√≠a</option>
        <option value="CE">C√©dula de extranjer√≠a</option>
        <option value="TI">Tarjeta de identidad</option>
        <option value="Pasaporte">Pasaporte</option>
      </select>
      <input type="text" name="documento" placeholder="N√∫mero de documento" required pattern="[0-9]{5,20}" title="Solo n√∫meros, m√≠nimo 5 d√≠gitos">
      <div>
        <button type="submit">Enviar</button>
        <button type="button" id="cerrarFormulario">Cancelar</button>
      </div>
    </form>
  </div>
</div>

<!-- Modal de compra exitosa -->
<div id="modalCompra" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.4); z-index:4000; align-items:center; justify-content:center;">
  <div class="modal-content" style="background:white; padding:30px 40px; border-radius:12px; box-shadow:0 4px 16px rgba(0,0,0,0.2); text-align:center;">
    <h2 style="color:#28a745;">¬°Gracias por tu compra!</h2>
    <p>Tu pedido ha sido realizado con √©xito.<br>Pronto recibir√°s la confirmaci√≥n en tu correo.</p>
    <button id="cerrarModal">Cerrar</button>
  </div>
</div>

<script>
  const tallaBtns = document.querySelectorAll(".talla-btn");
  const comprarBtn = document.getElementById("comprarBtn");
  const cartIcon = document.getElementById('cartIcon');
  const cartContainer = document.getElementById('cartContainer');
  const cartItems = document.getElementById('cartItems');
  const cartCount = document.getElementById('cartCount');
  const checkoutBtn = document.getElementById('checkoutBtn');
  const cartTotal = document.getElementById('cartTotal');
  const modalFormulario = document.getElementById('modalFormulario');
  const cerrarFormulario = document.getElementById('cerrarFormulario');
  const formCompra = document.getElementById('formCompra');
  const modalCompra = document.getElementById('modalCompra');
  const cerrarModal = document.getElementById('cerrarModal');
  let tallaSeleccionada = "";

  // Selecci√≥n de talla
  tallaBtns.forEach(btn => {
    btn.addEventListener("click", () => {
      tallaBtns.forEach(b => b.classList.remove("selected"));
      btn.classList.add("selected");
      tallaSeleccionada = btn.dataset.talla;
      comprarBtn.removeAttribute("disabled");
    });
  });

  // A√±adir al carrito y mostrar carrito actualizado
  comprarBtn.addEventListener("click", (e) => {
    e.preventDefault();
    if (tallaSeleccionada) {
      const producto = {
        nombre: "Nike LeBron 20",
        categoria: "Zapatillas de Baloncesto",
        modelo: "nike_lebron_20",
        talla: tallaSeleccionada,
        precio: "179.99"
      };

      // A√±adir el producto al carrito en localStorage
      let carrito = JSON.parse(localStorage.getItem("carrito")) || [];
      carrito.push(producto);
      localStorage.setItem("carrito", JSON.stringify(carrito));
      loadCart();

      // Redireccionar a la p√°gina de confirmaci√≥n de compra con los par√°metros correctos
      window.location.href = `confirmar_comprabasket.html?modelo=${encodeURIComponent(producto.modelo)}&nombre=${encodeURIComponent(producto.nombre)}&categoria=${encodeURIComponent(producto.categoria)}&talla=${encodeURIComponent(producto.talla)}&precio=${encodeURIComponent(producto.precio)}`;
    } else {
      alert("Por favor, selecciona una talla antes de continuar.");
    }
});
  // Mostrar/Ocultar el carrito
  cartIcon.addEventListener('click', () => {
    cartContainer.style.display = cartContainer.style.display === 'block' ? 'none' : 'block';
  });

  // Mostrar total y ocultar bot√≥n si el carrito est√° vac√≠o
  function loadCart() {
    const carrito = JSON.parse(localStorage.getItem('carrito')) || [];
    cartCount.textContent = carrito.length;

    cartItems.innerHTML = '';
    let total = 0;

    if (carrito.length === 0) {
      cartItems.innerHTML = '<p style="text-align: center; padding: 10px;">El carrito est√° vac√≠o.</p>';
      cartTotal.textContent = 'Total: $0.00';
      checkoutBtn.style.display = 'none';
      return;
    }
    checkoutBtn.style.display = 'inline-block';

    carrito.forEach((producto, index) => {
      const item = document.createElement('div');
      item.classList.add('cart-item');
      item.innerHTML = `
        <div>
          <p><strong>${producto.nombre}</strong></p>
          ${producto.talla ? `<p>Talla: ${producto.talla}</p>` : ""}
          <p>Precio: ${producto.precio}</p>
        </div>
        <button class="remove-btn" data-index="${index}">Eliminar</button>
      `;
      cartItems.appendChild(item);

      if (producto.precio) {
        let precioNum = parseFloat(producto.precio.replace('$', '').replace(',', '.'));
        if (!isNaN(precioNum)) total += precioNum;
      }
    });

    cartTotal.textContent = 'Total: $' + total.toLocaleString('es-CO', {minimumFractionDigits:2, maximumFractionDigits:2});

    const removeButtons = document.querySelectorAll('.remove-btn');
    removeButtons.forEach(button => {
      button.addEventListener('click', (e) => {
        const index = e.target.getAttribute('data-index');
        removeFromCart(index);
      });
    });
  }

  // Eliminar un producto del carrito
  function removeFromCart(index) {
    let carrito = JSON.parse(localStorage.getItem('carrito')) || [];
    carrito.splice(index, 1);
    localStorage.setItem("carrito", JSON.stringify(carrito));
    loadCart();
  }

  // Finalizar compra: mostrar formulario de datos
  checkoutBtn.addEventListener('click', (e) => {
    e.preventDefault();
    modalFormulario.style.display = 'flex';
  });

  // Cerrar formulario solo con el bot√≥n cancelar
  cerrarFormulario.onclick = function() {
    modalFormulario.style.display = 'none';
  };

  // Validaci√≥n y mostrar mensaje de √©xito
  formCompra.addEventListener('submit', function(e) {
    const telefono = this.telefono.value;
    const documento = this.documento.value;
    if (!/^\d{7,15}$/.test(telefono)) {
      alert('El tel√©fono debe contener solo n√∫meros (m√≠nimo 7 d√≠gitos).');
      this.telefono.focus();
      e.preventDefault();
      return false;
    }
    if (!/^\d{5,20}$/.test(documento)) {
      alert('El n√∫mero de documento debe contener solo n√∫meros (m√≠nimo 5 d√≠gitos).');
      this.documento.focus();
      e.preventDefault();
      return false;
    }
    e.preventDefault();
    localStorage.removeItem('carrito');
    loadCart();
    modalFormulario.style.display = 'none';
    modalCompra.style.display = 'flex';
  });

  // Cerrar modal de compra exitosa solo con el bot√≥n cerrar
  cerrarModal.onclick = function() {
    modalCompra.style.display = 'none';
  };

  // Cargar el carrito al cargar la p√°gina
  loadCart();
</script>

</body>
</html>